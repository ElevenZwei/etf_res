# 说明
这个项目要尝试复现使用几个因子做线性回归搞出来的期权定价方案。

并且我一定要及时写实验报告总结说明。
不写实验报告的代码时间长了全都是烂坑，自己也不知道自己做了什么。

# 想法说明
这是一个线性回归方法给期权定价的模型。

线性回归的输入因子有三个：

1. 日内股指期货指数价格移动的百分比
1. 日内股指期货指数的分钟级方差
1. 30 日期权价格的分钟级方差

输出的因子是 期权价格日内移动的百分比。

其中期权选择要锁定一个档位，例如实值一档，每日以当天的开盘价选择最新的实值一档。
用这种选择期权的方法计算日内期权的价格移动，以及 30 日每天这个档位期权价格的分钟级方差。

30 日的分钟级方差这个输入因子，在一天之内保持一个常数。其他的输入因子每天从 0 开始更新。

## 反思
线性回归对于这样随机过程的时间序列是一个好的估计方式吗？
线性回归中的高度相关的因子是否降低了这个回归的效用？
对于时间序列，我们现在要预测之后的价格，而不是当下的价格，对于当下的价格做 MSE 是不是很傻？
在解释力这个方面，对于当下价格的评估和对于未来价格的评估有什么关系呢？
只能说是过去一段时间的平均参数预测值，可以是未来一段时间会回归的价格。
**用什么样的假设检验才能判断未来数据会回到当下的预测值？**

所以在无数的数学模型和论文深处，更好的模型是什么？

# 文件结构
input/sample_mid.csv 是他给出的可用于回归模型的中间数据。

我现在的任务有两方面，
一方面是训练线性模型测试收益结果。
一方面是看看中间数据怎么得到，或者有没有更好的中间数据分解的方法。

# 试验进展

## 04-10
现在线性回归的图像是得到了，但是它在大波动的时候预测的准确程度怎样很难判断。
因为他输入的这些因子就不是稳定的独立因子，而且 Var 项目贡献正数还是负数也不确定。
所以做出来的预测有的时候非常准确，有的时候连上下方向都是反的。
在指数波动大的时候预测误差显然也更大一些，误差是顺向误差多还是反向误差多也值得统计。

我现在先按照他的原始想法设计交易，然后我们分析一下收益的成因以及截断位置。
想要上杠杆拉高收益我们就只做买权。Call Put 实值一档的买权可以相当赚钱。

我们可以把收益分成几种。大波趋势、大波回归、小波趋势、小波回归。
趋势还是回归的分类依据是开仓的时候 Pred 是支持日内的趋势还是反对日内的趋势。
大波还是小波的分类依据，我们会有先验分类和后验分类两种。
我现在认为吃小波回归是最稳定的收益来源，一旦出现大波就止损。
**实验的结果表明如果反过来只做大波，这个盈利简直无限啊**

我看着这个不稳定的图像的时候的第一反应是，要是这个也能预测方向赚到钱，
那么我自己的模型就应该赚翻了。
我觉得它现在这个没有对冲的结构相当危险，起码也应该做牛熊价差上的一个回归套利。
如果用它的几个因子线性预测回归套利，我觉得还有更大的稳定盈利。只不过这样的杠杆就很小了。


