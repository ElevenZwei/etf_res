# 轮换策略收益对比  

## 第一次试验  

初版的轮换方法是在每个切换策略的时间点，用过去一段日期的回测结果，从中挑选复利收益最好的十组参数，用来运行之后一段时间的交易。  

排名的方法是复利收益，选择 Top 10 的参数集合。假设这些参数占用相同的资金，计算它们收益的平均值当作我们可以获得的收益。  

对于不同时间长度的训练集和测试集进行试验，初步有三种方案：  
1. 上个月决定下个月的参数集合，训练集长度是一个月，测试集长度也是一个月。  
2. 前四个星期决定这个星期，训练集长度 28 天，测试集长度 7 天。  
3. 上个星期决定这个星期，训练集长度 7 天，测试集长度 7 天。  

在每个方案里面，训练集上的收益表示了上帝视角，它是捕捉每个周期的最好参数集合的收益。这个收益一定高于验证集上的收益，验证集是把这些参数向后推移一段时间，假作还是最好参数集合的收益。于是我们把训练集上的收益叫做理想收益，测试集上的收益叫做真实收益。  

在方案和方案之间，训练集时间长度越短，理想收益一定越高。因为上帝视角下，一个月里每个星期挑选最佳参数的收益总和，一定高于这个月整体选择最佳参数的收益。轮换的机会可以提高上帝视角下的理想收益。但是不一定提高真实收益。  
有一个特殊情况，当训练集时间片重叠的时候，例如前四个星期决定下个星期的情况里面，理想收益只能把训练集的收益求和之后除以 4 ，这个时候每个星期的理想收益是四个时间片的平均值，这个星期的好参数和不好的参数都在里面，所以理想收益不会太高。

试验数据可以总结如下：  
1. 159915 上月决定下月的理想收益 56% ，真实收益 27% 。  
2. 159915 四个星期决定一个星期的理想收益 50% ，真实收益 31% 。  
3. 159915 上个星期决定这个星期的理想收益 77% ，真实收益 38% 。  
4. 510500 上月决定下月的理想收益 35% ，真实收益 14% 。  
5. 510500 四个星期决定一个星期的理想收益 33% ，真实收益 11% 。  
6. 510500 上个星期决定这个星期的理想收益 57% ，真实收益 7% 。  

从上面的这些基本规律观察轮换策略的试验结果。  
1. 159915 的理想收益和真实收益都大大超过了 510500 的收益，大约是 2~3 倍。  
2. 159915 的真实收益大约是理想收益的 50% 。  
3. 159915 在三种时间长度里，上个星期决定这个星期的真实收益最好。  
4. 159915 在三种时间长度里，轮换周期越短，真实收益越好。这表明 159915 的因子特征分布很可能有短期保持不变的特点。这是时序数据里可以利用的重要特性。  
5. 510500 的真实收益大约是理想收益的 30% 。  
6. 510500 在三种时间长度里，上个月决定下个月的真实收益最好。  
7. 510500 在三种时间长度里，轮换周期越长，真实收益越好。注意到周轮换时候的真实收益和理想收益的比值呈现断崖式下跌。这表明 510500 的因子特征分布很可能没有短周期的稳定性，短周期游走极快，但是在长时间大样本的时候，又出现了分布回归的特点。  

从这些试验里面我们可以看到，上个周期取下个周期的做法，对于 159915 还算是合适的，即使如此，向后延续一个星期也只能做到期望收益的 50% 。可见取上个周期的最好参数有不少过拟合的风险。如果不限于找 Top Return ，而是加入其他的评价方法，也许可以避免过拟合的结果。  
这个可以从两个方向入手，一个是后验来看，我需要对训练集上的参数排名和验证集上的参数排名做一个比较，看看排名容易大幅变化的参数，和排名不容易大幅度漂移的参数有什么样的特征。一个是先验地尝试加入其他的评价因子，例如训练集上的收益回撤比例 (sharpe)，训练集上的收益是均匀还是单次突变 (stdev) 等等。  
对于 510500 它的短期分布不稳定，长期回归稳定的特征还需要其他工具研究。  
另外 588000 科创板可能有和创业板类似的特点，可以准备数据测试一下。  
